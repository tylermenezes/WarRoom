{% extends "template.html.twig" %}
{% block title %}Campaigns{% endblock %}
{% macro campaignlist(campaigns) %}
    <ul class="campaigns">
        {% for campaign in campaigns %}
            <li>
                <a href="/campaigns/view/{{ campaign.id }}">
                    <span class="title">{{ campaign.title }}</span>
                    <div class="time">
                        {% if campaign.starts_at %}
                            <span class="starts">{{ campaign.starts_at|date('M j Y') }}</span>
                        {% endif %}
                        {% if campaign.ends_at %}
                            <span class="ends">{{ campaign.ends_at|date('M j Y') }}</span>
                        {% endif %}
                    </div>
                </a>
            </li>
        {% endfor %}
    </ul>
{% endmacro %}
{% import _self as index %}
{% block content %}
    {% if my_campaigns|length > 0 %}
        <h1>My Running Campaigns</h1>
        {{ index.campaignlist(my_campaigns) }}
    {% endif %}

    {% if me.in_bailiwick and other_campaigns|length > 0 %}
        <h1>Other Running Campaigns</h1>
        {{ index.campaignlist(other_campaigns) }}
    {% endif %}

    {% if me.is_admin %}
        {% if upcoming_campaigns|length > 0 %}
            <h1>Upcoming Campaigns</h1>
            {{ index.campaignlist(upcoming_campaigns) }}
        {% endif %}

        {% if archived_campaigns|length > 0 %}
            <h1>Archived Campaigns</h1>
            {{ index.campaignlist(archived_campaigns) }}
        {% endif %}
    {% endif %}

    {% if me.is_admin %}
        <a href="/campaigns/new" class="new">Create New</a>
    {% endif %}
{% endblock %}